import { complete } from "@actions/languageservice/complete";
import { contextProviders } from "./context-providers";
import { getFileProvider } from "./file-provider";
import { Requests } from "./request";
import { valueProviders } from "./value-providers";
export async function onCompletion(connection, position, document, client, repoContext, cache) {
    return await complete(document, position, {
        valueProviderConfig: repoContext && valueProviders(client, repoContext, cache),
        contextProviderConfig: repoContext && contextProviders(client, repoContext, cache),
        fileProvider: getFileProvider(client, cache, repoContext?.workspaceUri, async (path) => {
            return await connection.sendRequest(Requests.ReadFile, { path });
        })
    });
}
//# sourceMappingURL=on-completion.js.map