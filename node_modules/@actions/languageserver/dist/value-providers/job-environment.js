export async function getEnvironments(client, cache, owner, name) {
    const environments = await cache.get(`${owner}/${name}/environments`, undefined, () => fetchEnvironments(client, owner, name));
    return Array.from(environments).map(env => ({ label: env }));
}
async function fetchEnvironments(client, owner, name) {
    let environments = [];
    try {
        const response = await client.repos.getAllEnvironments({
            owner,
            repo: name
        });
        if (response.data.environments) {
            environments = response.data.environments.map(env => env.name);
        }
    }
    catch (e) {
        console.log("Failure to retrieve environments: ", e);
    }
    return environments;
}
//# sourceMappingURL=job-environment.js.map